<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Personal Finance Dashboard – track income, expenses, and net balance with category breakdowns, monthly filtering, and visual charts." />
  <meta name="keywords" content="personal finance, budget tracker, expense tracker, income tracker, finance dashboard" />
  <meta name="author" content="FinTrack" />
  <meta property="og:title" content="FinTrack — Personal Finance Dashboard" />
  <meta property="og:description" content="Track your income and expenses with beautiful charts and monthly insights." />
  <meta property="og:type" content="website" />
  <title>FinTrack — Personal Finance Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,600&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <aside class="sidebar" id="sidebar">
    <div class="sidebar-brand">
      <span class="brand-icon">◈</span>
      <span class="brand-name">FinTrack</span>
    </div>
    <nav class="sidebar-nav">
      <a href="#" class="nav-item active" data-view="dashboard"><span class="nav-icon">▦</span> Dashboard</a>
      <a href="#" class="nav-item" data-view="transactions"><span class="nav-icon">⇄</span> Transactions</a>
      <a href="#" class="nav-item" data-view="charts"><span class="nav-icon">◎</span> Analytics</a>
    </nav>
    <div class="sidebar-footer">
      <p class="sidebar-version">FinTrack v1.0</p>
    </div>
  </aside>

  <header class="topbar">
    <button class="menu-btn" id="menuBtn">☰</button>
    <span class="topbar-title">FinTrack</span>
    <span></span>
  </header>

  <main class="main">

    <section class="view active" id="view-dashboard">
      <div class="page-header">
        <div><h1 class="page-title">Dashboard</h1><p class="page-sub">Your financial snapshot</p></div>
        <div class="filter-bar">
          <select id="monthFilter" class="select-field"><option value="all">All time</option></select>
          <button class="btn-primary" id="openModalBtn">+ Add Entry</button>
        </div>
      </div>
      <div class="cards-grid">
        <div class="card card--balance"><p class="card-label">Net Balance</p><h2 class="card-value" id="totalBalance">₹0.00</h2><span class="card-badge" id="balanceTrend"></span></div>
        <div class="card card--income"><p class="card-label">Total Income</p><h2 class="card-value" id="totalIncome">₹0.00</h2></div>
        <div class="card card--expense"><p class="card-label">Total Expenses</p><h2 class="card-value" id="totalExpense">₹0.00</h2></div>
        <div class="card card--count"><p class="card-label">Transactions</p><h2 class="card-value" id="txCount">0</h2></div>
      </div>
      <div class="charts-row">
        <div class="card chart-card"><h3 class="chart-title">Category Breakdown</h3><div class="chart-wrap"><canvas id="pieChart"></canvas></div><div id="pieLegend" class="pie-legend"></div></div>
        <div class="card chart-card"><h3 class="chart-title">Income vs Expenses</h3><div class="chart-wrap chart-wrap--bar"><canvas id="barChart"></canvas></div></div>
      </div>
      <div class="card recent-card">
        <div class="recent-header"><h3 class="chart-title">Recent Transactions</h3><a href="#" class="link-view-all" data-view="transactions">View all →</a></div>
        <div id="recentList" class="tx-list"></div>
      </div>
    </section>

    <section class="view" id="view-transactions">
      <div class="page-header">
        <div><h1 class="page-title">Transactions</h1><p class="page-sub">All entries</p></div>
        <div class="filter-bar">
          <select id="txMonthFilter" class="select-field"><option value="all">All time</option></select>
          <select id="txTypeFilter" class="select-field"><option value="all">All types</option><option value="income">Income</option><option value="expense">Expense</option></select>
          <button class="btn-primary" id="openModalBtn2">+ Add Entry</button>
        </div>
      </div>
      <div class="card">
        <div id="fullTxList" class="tx-list"></div>
        <p id="noTx" class="empty-state" style="display:none">No transactions yet. Add your first entry!</p>
      </div>
    </section>

    <section class="view" id="view-charts">
      <div class="page-header">
        <div><h1 class="page-title">Analytics</h1><p class="page-sub">Deep dives</p></div>
        <div class="filter-bar"><select id="analyticsMonthFilter" class="select-field"><option value="all">All time</option></select></div>
      </div>
      <div class="charts-row">
        <div class="card chart-card"><h3 class="chart-title">Expense by Category</h3><div class="chart-wrap"><canvas id="pieChart2"></canvas></div><div id="pieLegend2" class="pie-legend"></div></div>
        <div class="card chart-card"><h3 class="chart-title">Monthly Overview</h3><div class="chart-wrap chart-wrap--bar"><canvas id="barChart2"></canvas></div></div>
      </div>
      <div class="card" style="margin-top:1.25rem">
        <h3 class="chart-title" style="margin-bottom:1.25rem">Category Details</h3>
        <div id="categoryTable" class="category-table"></div>
      </div>
    </section>

  </main>

  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">New Entry</h2>
        <button class="modal-close" id="modalClose">✕</button>
      </div>
      <form id="entryForm" class="entry-form" novalidate>
        <div class="form-group">
          <label class="form-label">Type</label>
          <div class="type-toggle">
            <button type="button" class="type-btn active" data-type="income">Income</button>
            <button type="button" class="type-btn" data-type="expense">Expense</button>
          </div>
          <input type="hidden" id="entryType" value="income" />
        </div>
        <div class="form-group">
          <label class="form-label" for="entryDesc">Description</label>
          <input type="text" id="entryDesc" class="input-field" placeholder="e.g. Salary, Groceries…" required />
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="entryAmount">Amount (₹)</label>
            <input type="number" id="entryAmount" class="input-field" placeholder="0.00" min="0.01" step="0.01" required />
          </div>
          <div class="form-group">
            <label class="form-label" for="entryDate">Date</label>
            <input type="date" id="entryDate" class="input-field" required />
          </div>
        </div>
        <div class="form-group">
          <label class="form-label" for="entryCategory">Category</label>
          <select id="entryCategory" class="select-field" style="width:100%"></select>
        </div>
        <button type="submit" class="btn-primary btn-full">Add Entry</button>
      </form>
    </div>
  </div>

  <script>
  // Clear old localStorage keys that may conflict
  try { localStorage.removeItem("ft_transactions"); } catch(e){}
</script>
<script src="app.js"></script>
</body>
</html>